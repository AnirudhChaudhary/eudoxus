Syntax error on line 17: Syntax Error after keyword next.
  next(train_state) :=
